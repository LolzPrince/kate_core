/* ============================================================================
   DARKCORE TERMINAL v2.1 - CRT VISUAL EFFECTS
   Эффекты старых ЭЛТ-мониторов для аутентичной атмосферы
   ============================================================================ */

/* MAIN SCREEN EFFECTS CONTAINER */
/* ============================= */
#screen {
    position: fixed;        /* Фиксированное положение поверх всего */
    top: 0;
    left: 0;
    width: 100%;            /* На весь экран */
    height: 100%;
    pointer-events: none;   /* Клики проходят сквозь эффекты */
    z-index: 100;           /* Поверх контента, под курсором */
    overflow: hidden;       /* Скрываем переполнение */
    opacity: 0.7;           /* Общая прозрачность эффектов */
}

/* ============================================================================
   CHROMATIC ABERRATION EFFECT
   Эффект хроматической аберрации (RGB расслоение)
   Имитирует старые мониторы с неидеальной фокусировкой
   ============================================================================ */

.chromatic-aberration {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: transparent; /* Прозрачный фон */
    z-index: 1;              /* Первый слой эффектов */
    pointer-events: none;
    mix-blend-mode: screen;  /* Режим наложения "экран" */
}

/* Красный канал - смещён вправо-вверх */
.chromatic-aberration::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: inherit;
    filter: blur(0.4px) hue-rotate(90deg); /* Лёгкое размытие и красный оттенок */
    opacity: 0.3;                           /* Низкая прозрачность */
    transform: translate(0.5px, -0.5px);    /* Смещение вправо-вверх */
}

/* Синий канал - смещён влево-вниз */
.chromatic-aberration::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: inherit;
    filter: blur(0.6px) hue-rotate(180deg); /* Больше размытия и синий оттенок */
    opacity: 0.2;                           /* Ещё ниже прозрачность */
    transform: translate(-0.5px, 0.5px);    /* Смещение влево-вниз */
}

/* ============================================================================
   SCANLINES EFFECT
   Эффект строчной развёртки ЭЛТ-мониторов
   ============================================================================ */

.scanlines {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* Линейный градиент создаёт чередующиеся прозрачные и тёмные линии */
    background: linear-gradient(
            to bottom,                    /* Вертикальное направление */
            transparent 50%,              /* 50% - прозрачная линия */
            rgba(0, 0, 0, 0.3) 51%       /* 51% - тёмная линия (сканирующая) */
    );
    background-size: 100% 4px;        /* Высота одной пары линий - 4px */
    z-index: 2;                       /* Второй слой эффектов */
    pointer-events: none;
}

/* ============================================================================
   VHS BLOOM EFFECT
   Эффект свечения и цветовых всплесков как в VHS записях
   ============================================================================ */

.vhs-bloom {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 3;                       /* Третий слой эффектов */
    pointer-events: none;
    /* Пульсирующая анимация с задержкой на основном состоянии */
    animation: bloomPulse 15s infinite alternate ease-in-out;
}

/* Ключевые кадры анимации VHS свечения */
@keyframes bloomPulse {
    0%, 70% {
        /* Основное состояние - слабое свечение */
        box-shadow:
                inset 0 0 60px rgba(0, 100, 255, 0.05),   /* Внутренняя тень - синяя */
                inset 0 0 100px rgba(0, 50, 150, 0.02);   /* Вторая тень - тёмно-синяя */
    }
    90% {
        /* Пик анимации - яркое свечение */
        box-shadow:
                inset 0 0 100px rgba(0, 150, 255, 0.1),   /* Ярче и больше */
                inset 0 0 200px rgba(0, 100, 200, 0.05);  /* Ещё больше размытие */
    }
}

/* ============================================================================
   GLITCH NOISE EFFECT
   Эффект случайного шума/помех как в аналоговом видео
   ============================================================================ */

.glitch-noise {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* Встроенный SVG с фильтром турбулентности для создания шума */
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.1'/%3E%3C/svg%3E");
    opacity: 0.03;                    /* Очень низкая прозрачность */
    z-index: 4;                       /* Четвёртый слой эффектов */
    pointer-events: none;
    /* Постоянное лёгкое дрожание */
    animation: noiseShift 0.2s infinite;
}

/* Дрожание шума - имитация аналоговых помех */
@keyframes noiseShift {
    0% { transform: translate(0, 0); }      /* Исходное положение */
    100% { transform: translate(3px, 3px); } /* Смещение по диагонали */
}

/* ============================================================================
   FLICKER EFFECT
   Эффект мерцания ЭЛТ-трубки
   ============================================================================ */

.flicker {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: transparent;
    z-index: 5;                       /* Пятый слой эффектов */
    pointer-events: none;
    /* Быстрое мерцание прозрачности */
    animation: flicker 0.15s infinite;
}

/* Ключевые кадры мерцания */
@keyframes flicker {
    0% { opacity: 0.97; }   /* Чуть менее прозрачно */
    50% { opacity: 1; }     /* Полная прозрачность */
    100% { opacity: 0.98; } /* Снова почти полностью прозрачно */
}

/* ============================================================================
   SCREEN CURVATURE EFFECT
   Эффект искривления экрана как у старых выпуклых ЭЛТ-мониторов
   ============================================================================ */

.screen-curvature {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* Множественные внутренние тени создают эффект глубины и закругления */
    box-shadow:
            inset 0 0 60px rgba(0, 0, 0, 0.9),   /* Тёмная виньетка по краям */
            inset 0 0 30px rgba(0, 0, 0, 0.8);   /* Вторая виньетка для плавности */
    border-radius: 2px;                      /* Лёгкое закругление углов */
    z-index: 6;                              /* Шестой слой (верхний) */
    pointer-events: none;
}

/* ============================================================================
   ADDITIONAL EFFECTS
   Дополнительные анимации для глитч-эффектов
   ============================================================================ */

/* GLITCH FLASH - быстрая вспышка для случайных глитчей */
/* ==================================================== */
@keyframes glitchFlash {
    0% { opacity: 0.8; }   /* Яркая вспышка */
    100% { opacity: 0; }   /* Полное исчезновение */
}

/* ============================================================================
   CURSOR-SPECIFIC EFFECTS
   Эффекты связанные с курсором
   ============================================================================ */

/* CURSOR GLOW - свечение вокруг курсора */
/* ===================================== */
.cursor-glow {
    filter: drop-shadow(0 0 5px #00ff88)          /* Первое свечение */
    drop-shadow(0 0 10px rgba(0, 255, 136, 0.5)); /* Второе свечение */
}

/* CURSOR CONTEXT - эффект для текста вокруг курсора */
/* ================================================= */
.cursor-context {
    transition: text-shadow 0.2s ease; /* Плавное изменение свечения */
}

/* TYPING BLUR - эффект размытия при быстром наборе */
/* ================================================ */
.typing-blur {
    animation: typingEffect 0.3s ease-out;
}

@keyframes typingEffect {
    0% {
        filter: blur(1px) brightness(1.5); /* Размытие и увеличение яркости */
    }
    100% {
        filter: blur(0) brightness(1);     /* Возврат к нормальному состоянию */
    }
}

/* ============================================================================
   PERFORMANCE OPTIMIZATIONS
   Оптимизации для плавной работы анимаций
   ============================================================================ */

/* Отключаем анимации для пользователей, предпочитающих уменьшенное движение */
@media (prefers-reduced-motion: reduce) {
    .chromatic-aberration::before,
    .chromatic-aberration::after,
    .vhs-bloom,
    .glitch-noise,
    .flicker,
    .cursor,
    #prompt,
    .rgb-shift,
    .glow,
    .crt-flash,
    .cursor-glow,
    .cursor-context,
    .typing-blur {
        animation: none !important;
        transition: none !important;
    }
}

/* Аппаратное ускорение анимаций для лучшей производительности */
.vhs-bloom,
.flicker,
.cursor {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
}

/* ============================================================================
   DARK/LIGHT MODE SUPPORT (для будущих обновлений)
   Поддержка тёмной и светлой темы
   ============================================================================ */

/* Светлая тема (потенциальная будущая функция) */
@media (prefers-color-scheme: light) {
    #screen {
        opacity: 0.4; /* Меньшая непрозрачность для светлого фона */
    }

    .scanlines {
        background: linear-gradient(
                to bottom,
                transparent 50%,
                rgba(255, 255, 255, 0.1) 51%
        );
    }

    .screen-curvature {
        box-shadow:
                inset 0 0 60px rgba(255, 255, 255, 0.1),
                inset 0 0 30px rgba(255, 255, 255, 0.05);
    }
}

/* ============================================================================
   PRINT STYLES (для печати)
   Стили для печатной версии
   ============================================================================ */

@media print {
    #screen {
        display: none; /* Скрываем эффекты при печати */
    }

    body {
        background: white !important;
        color: black !important;
    }
}