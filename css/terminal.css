/* ============================================================================
   DARKCORE TERMINAL v2.1 - MAIN STYLES
   Основные стили терминала и пользовательского интерфейса
   ============================================================================ */

/* CSS RESET & GLOBAL DEFAULTS */
/* ============================ */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box; /* Упрощает работу с размерами элементов */
}

/* BODY STYLES */
/* ============ */
body {
    background: #050505; /* Чёрный фон для контраста */
    color: #00d8ff; /* Основной цвет текста - неоновый синий */
    font-family: "IBM Plex Mono", monospace; /* Моноширинный шрифт для терминала */
    height: 100vh; /* Полная высота окна */
    overflow: hidden; /* Скрываем скролл за пределами окна */
    cursor: crosshair; /* Крестообразный курсор мыши */
    position: relative; /* Для позиционирования дочерних элементов */
}

/* MAIN CONSOLE CONTAINER */
/* ====================== */
#console {
    position: relative; /* Для наложения эффектов поверх */
    padding: 30px; /* Внутренние отступы от краёв */
    width: 100vw; /* Полная ширина окна */
    height: 100vh; /* Полная высота окна */
    display: flex;
    flex-direction: column; /* Вертикальное расположение элементов */
    z-index: 10; /* Поверх эффектов CRT */

    /* Текстовые эффекты */
    text-shadow: 0 0 10px rgba(0, 216, 255, 0.3);

    /* Градиентный фон для эффекта глубины */
    background: radial-gradient(
            ellipse at center,
            rgba(10, 15, 30, 0.8) 0%,     /* Центр - тёмный синий с прозрачностью */
            rgba(5, 8, 20, 0.9) 70%,      /* Средняя зона - ещё темнее */
            rgba(3, 5, 15, 1) 100%        /* Края - почти чёрный */
    );
}

/* OUTPUT AREA - где отображается история команд и вывод */
/* ===================================================== */
#output {
    flex: 1; /* Занимает всё доступное пространство */
    overflow-y: auto; /* Вертикальный скролл при переполнении */
    white-space: pre-wrap; /* Сохраняет пробелы и переносы строк */
    padding-right: 15px; /* Отступ справа для скроллбара */
    font-size: 16px;
    line-height: 1.4; /* Межстрочный интервал для читаемости */
    letter-spacing: 0.5px; /* Небольшое разрежение букв */

    /* Визуальные эффекты текста */
    filter: blur(0.2px); /* Лёгкое размытие для CRT эффекта */
    text-shadow:
            0 0 1px #00d8ff,              /* Внутреннее свечение */
            0 0 2px rgba(0, 216, 255, 0.5); /* Внешнее свечение */
}

/* INPUT LINE - строка ввода команды */
/* ================================= */
#input-line {
    display: flex;
    font-size: 16px;
    margin-top: 10px; /* Отступ от вывода */
    position: relative; /* Для позиционирования каретки */
    align-items: center; /* Выравнивание по центру по вертикали */
}

/* PROMPT SYMBOL - символ приглашения (❯ или >) */
/* ============================================ */
#prompt {
    margin-right: 12px; /* Отступ от поля ввода */
    color: #00ff88; /* Зелёный цвет как в старых терминалах */
    text-shadow: 0 0 8px #00ff88; /* Свечение */
    font-weight: 500;
}

/* COMMAND INPUT FIELD */
/* =================== */
#cmd {
    flex: 1; /* Занимает всё оставшееся пространство */
    background: transparent; /* Прозрачный фон */
    border: none; /* Без рамки */
    color: #00d8ff; /* Цвет текста */
    outline: none; /* Убираем стандартный outline */
    font-size: 16px;
    font-family: inherit; /* Наследует шрифт от родителя */
    letter-spacing: 0.5px; /* Разрежение букв */
    text-shadow: 0 0 5px currentColor; /* Свечение текста */
    caret-color: transparent; /* Скрываем стандартную каретку браузера */
    min-width: 20px; /* Минимальная ширина для отображения каретки */
}

/* ============================================================================
   CUSTOM CARET (CURSOR) STYLES
   Кастомные стили для курсора ввода (каретки)
   ============================================================================ */

/* Контейнер для каретки - абсолютно позиционированный элемент */
#caret {
    position: absolute; /* Позиционируем абсолютно относительно #input-line */
    pointer-events: none; /* Клики проходят сквозь каретку */
    z-index: 20; /* Поверх всего */

    /* Стили каретки */
    width: 8px; /* ТОЛСТАЯ каретка (стандартная 1px) */
    height: 1.2em; /* Высота как у текста */
    background-color: #00ff88; /* Неоново-зелёный цвет */
    animation: caretBlink 1s infinite; /* Мигание */
    opacity: 0.9; /* Не полностью непрозрачная */
    box-shadow:
            0 0 10px #00ff88,
            0 0 20px rgba(0, 255, 136, 0.5); /* Свечение */
    border-radius: 1px; /* Слегка закруглённые углы */

    /* Начальное положение (будет обновляться JavaScript) */
    left: 40px; /* Примерная начальная позиция после символа приглашения */
    top: 50%; /* По центру по вертикали */
    transform: translateY(-50%); /* Точное центрирование */
}

/* Анимация мигания каретки */
@keyframes caretBlink {
    0%, 50% {
        opacity: 0.9; /* Видима */
        box-shadow:
                0 0 10px #00ff88,
                0 0 20px rgba(0, 255, 136, 0.5);
    }
    51%, 100% {
        opacity: 0.3; /* Почти невидима */
        box-shadow:
                0 0 5px #00ff88,
                0 0 10px rgba(0, 255, 136, 0.2);
    }
}

/* Эффект при активном поле ввода */
#cmd:focus ~ #caret {
    animation: caretBlinkFocus 0.8s infinite;
    opacity: 1;
}

@keyframes caretBlinkFocus {
    0%, 50% {
        opacity: 1; /* Полная видимость */
        box-shadow:
                0 0 15px #00ff88,
                0 0 30px rgba(0, 255, 136, 0.7);
    }
    51%, 100% {
        opacity: 0.3; /* Полупрозрачность */
        box-shadow:
                0 0 5px #00ff88,
                0 0 10px rgba(0, 255, 136, 0.2);
    }
}

/* Стиль каретки когда поле ввода не в фокусе */
#cmd:not(:focus) ~ #caret {
    display: block !important;
    opacity: 1 !important;
}

/* ============================================================================
   VISUAL EFFECTS ANIMATIONS
   Анимации для визуальных эффектов
   ============================================================================ */

/* RGB SHIFT EFFECT - эффект смещения цветов при вводе */
/* =================================================== */
.rgb-shift {
    animation: rgbShift 0.3s ease-out;
}

/* Ключевые кадры анимации RGB смещения */
@keyframes rgbShift {
    0% {
        /* Начало: текст разбит на красный и зелёный каналы */
        text-shadow:
                1px 0 0 #ff0080,  /* Красное смещение вправо */
                -1px 0 0 #00ff80; /* Зелёное смещение влево */
        transform: translateX(-1px); /* Лёгкое смещение */
    }
    100% {
        /* Конец: возврат к нормальному состоянию */
        text-shadow:
                0 0 1px #00d8ff,              /* Внутреннее свечение */
                0 0 2px rgba(0, 216, 255, 0.5); /* Внешнее свечение */
        transform: translateX(0); /* Нормальная позиция */
    }
}
/* TEXT GLOW EFFECT - пульсирующее свечение текста */
/* =============================================== */
.glow {
    animation: textGlow 2s ease-in-out infinite alternate;
}

@keyframes textGlow {
    from {
        text-shadow: 0 0 5px #00d8ff; /* Минимальное свечение */
    }
    to {
        text-shadow:
                0 0 10px #00d8ff,              /* Яркое свечение */
                0 0 20px rgba(0, 216, 255, 0.5); /* Большое размытое свечение */
    }
}

/* CRT START-UP FLASH - эффект включения монитора */
/* ============================================== */
.crt-flash {
    animation: crtStart 0.5s ease-out;
}

@keyframes crtStart {
    0% {
        opacity: 0;               /* Начинаем с невидимого */
        filter: brightness(3) contrast(2); /* Высокая яркость и контраст */
    }
    50% {
        opacity: 0.8;             /* Полупрозрачность */
        filter: brightness(2) contrast(1.5); /* Средние значения */
    }
    100% {
        opacity: 1;               /* Полная видимость */
        filter: brightness(1) contrast(1); /* Нормальные значения */
    }
}

/* ============================================================================
   NANO EDITOR CURSOR STYLES
   Курсор для редактора nano (блочный мигающий)
   ============================================================================ */

/* Курсор в редакторе nano */
.cursor {
    display: inline-block;        /* Для правильного позиционирования */
    background-color: #00ff88;    /* Цвет фона курсора */
    color: #00ff88;               /* Цвет текста (совпадает с фоном) */
    animation: nanoCursorBlink 1s infinite; /* Мигание */
    font-weight: bold;            /* Жирный шрифт */
    width: 8px;                   /* Ширина курсора */
    margin: 0 -4px;               /* Компенсация ширины */
}

/* Мигание курсора редактора nano */
@keyframes nanoCursorBlink {
    0%, 50% { opacity: 1; }   /* Видим */
    51%, 100% { opacity: 0; } /* Невидим */
}

/* Подсветка активного поля ввода */
#cmd:focus {
    outline: none; /* Убираем стандартный outline */
    text-shadow:
            0 0 10px #00ff88,                    /* Яркое свечение */
            0 0 20px rgba(0, 255, 136, 0.3);     /* Размытое свечение */
}

/* Стили для выделенного текста в выводе */
#output span {
    background-color: rgba(0, 255, 136, 0.2); /* Полупрозрачный зелёный фон */
    padding: 0 2px;                           /* Небольшие отступы */
    border-radius: 2px;                       /* Закруглённые углы */
}

/* ============================================================================
   SCROLLBAR CUSTOMIZATION
   Кастомные стили для скроллбаров
   ============================================================================ */

/* MAIN SCROLLBAR - для области вывода */
/* =================================== */
::-webkit-scrollbar {
    width: 10px; /* Ширина скроллбара */
}

::-webkit-scrollbar-track {
    background: rgba(0, 20, 40, 0.3); /* Полупрозрачный тёмно-синий */
    border-radius: 5px;               /* Закруглённые углы */
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, #00d8ff, #0088cc); /* Градиентный ползунок */
    border-radius: 5px;                                       /* Закруглённые углы */
    border: 1px solid rgba(0, 216, 255, 0.3);                 /* Светящаяся рамка */
}

/* EDITOR SCROLLBAR - специальные стили для редактора */
/* ================================================== */
.editor-scroll {
    scrollbar-width: thin;                     /* Тонкий скроллбар для Firefox */
    scrollbar-color: #00ff88 rgba(0, 20, 40, 0.3); /* Цвета для Firefox */
}

.editor-scroll::-webkit-scrollbar {
    width: 8px; /* Уже чем основной */
}

.editor-scroll::-webkit-scrollbar-track {
    background: rgba(0, 20, 40, 0.1); /* Более прозрачный трек */
    border-radius: 4px;
}

.editor-scroll::-webkit-scrollbar-thumb {
    background: #00ff88;                    /* Зелёный ползунок */
    border-radius: 4px;
    border: 1px solid rgba(0, 255, 136, 0.3); /* Светящаяся зелёная рамка */
}

/* ============================================================================
   BROWSER SELECTION STYLES
   Стили для выделения текста браузером
   ============================================================================ */
::selection {
    background: rgba(0, 216, 255, 0.3); /* Полупрозрачный синий фон */
    color: #ffffff;                      /* Белый текст при выделении */
}

/* ============================================================================
   MEDIA QUERIES (для будущей адаптивности)
   Адаптивные стили для разных размеров экрана
   ============================================================================ */

/* Для маленьких экранов (телефоны) */
@media (max-width: 768px) {
    #console {
        padding: 15px; /* Меньше отступов */
    }

    #output {
        font-size: 14px; /* Меньший размер шрифта */
    }

    #input-line {
        font-size: 14px;
    }

    /* Меньшая каретка для мобильных */
    #caret {
        width: 6px;
    }

    ::-webkit-scrollbar {
        width: 6px; /* Уже скроллбар */
    }
}

/* Для очень маленьких экранов */
@media (max-width: 480px) {
    #console {
        padding: 10px;
    }

    #output {
        font-size: 12px;
        padding-right: 8px;
    }

    /* Ещё меньшая каретка */
    #caret {
        width: 4px;
    }
}

/* Для пользователей, предпочитающих уменьшенное движение */
@media (prefers-reduced-motion: reduce) {
    #caret,
    .cursor,
    .rgb-shift,
    .glow,
    .crt-flash {
        animation: none !important;
    }

    #caret {
        opacity: 0.7; /* Постоянная видимость без мигания */
    }
}