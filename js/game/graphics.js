/* ============================================================================
   DARK QUEST GRAPHICS
   –ü–∏–∫—Å–µ–ª—å-–∞—Ä—Ç –∏ ASCII –≥—Ä–∞—Ñ–∏–∫–∞ –≤ —Å—Ç–∏–ª–µ 80-—Ö dark fantasy
   ============================================================================ */

const QuestGraphics = {
    // ASCII –∞—Ä—Ç —Å—Ü–µ–Ω –≤ —Å—Ç–∏–ª–µ –ø–∏–∫—Å–µ–ª—å-–∞—Ä—Ç
    scenes: {
        intro: `
        ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
        ‚ïë                                          ‚ïë
        ‚ïë   ‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó
        ‚ïë   ‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù
        ‚ïë   ‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   
        ‚ïë   ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   
        ‚ïë   ‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   
        ‚ïë   ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïù   
        ‚ïë                                          ‚ïë
        ‚ïë     1987 - THE LOST KNIGHT               ‚ïë
        ‚ïë     A Dark Fantasy Adventure             ‚ïë
        ‚ïë                                          ‚ïë
        ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
        `,

        castle: `
           .-.
          (   )
           '-'
            |
           .-.
          |   |
          |   |
         _|___|_
        |#######|
        |#######|
        |#######|
        |_______|
           | |
           | |
          _| |_
         |_____|
        `,

        forest: `
            /\\
           /**\\
          /****\\
         /******\\
        /********\\
        |/\|\/\/\|\\
         \\/|/\\|\\/
          \\|//\\|/
           \\|//
            ||
            ||
        `,

        cave: `
            /\\
           /  \\
          /    \\
         /  /\  \\
        /  /  \  \\
        \\/    \\/
         \\____/
          |  |
          |__|
         /    \\
        /______\\
        `,

        dragon: `
            /\\     /\\
           /  \\   /  \\
          /    \\-/    \\
         /             \\
        /      /\\       \\
        \\     /  \\      /
         \\   /    \\    /
          \\_/      \\_/
           |        |
           |________|
          /          \\
         /____________\\
        `,

        village: `
           /\\
          /  \\
         /____\\
        |  __  |
        | |  | |
        | |__| |
        |______|
          |  |
         _|__|_
        |______|
        `,

        battle: `
        ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
        ‚ïë     ‚öîÔ∏è üè∞ üêâ ‚öîÔ∏è üè∞ üêâ ‚öîÔ∏è üè∞ üêâ ‚öîÔ∏è      ‚ïë
        ‚ïë        BATTLE! FIGHT FOR HONOR!         ‚ïë
        ‚ïë     ‚öîÔ∏è üè∞ üêâ ‚öîÔ∏è üè∞ üêâ ‚öîÔ∏è üè∞ üêâ ‚öîÔ∏è      ‚ïë
        ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
        `,

        tavern: `
           _______
          |       |
          |  üç∫   |
          |_______|
           \\     /
            \\___/
             |
            / \\
           /   \\
          /_____\\
         |  ___  |
         | |   | |
         | |___| |
         |_______|
        `,

        dungeon: `
        ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
        ‚ïë   ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë   ‚ïë
        ‚ïë   ‚ñë‚ñà‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñà ‚ñà‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñà ‚ñà‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñà ‚ñà‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñà‚ñë‚ñë   ‚ïë
        ‚ïë   ‚ñë‚ñà ‚ñà‚ñà‚ñà ‚ñà ‚ñà ‚ñà‚ñà‚ñà ‚ñà ‚ñà ‚ñà‚ñà‚ñà ‚ñà ‚ñà ‚ñà‚ñà‚ñà ‚ñà‚ñë‚ñë   ‚ïë
        ‚ïë   ‚ñë‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà ‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà ‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà ‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñë‚ñë   ‚ïë
        ‚ïë   ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë   ‚ïë
        ‚ïë         DARKEST DUNGEON                  ‚ïë
        ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
        `
    },

    // –ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –≤ ASCII
    characters: {
        knight: `
           /\\
          /  \\
         |----|
         | [] |
         |----|
          \\  /
           \\/
           /\\
          /  \\
        `,

        wizard: `
           /\\
          /__\\
         |    |
         |/\\/\\|
         |____|
          /  \\
         /    \\
        `,

        merchant: `
           /\\
          /  \\
         |üí∞  |
         |____|
          /  \\
         /    \\
        `,

        dragon_boss: `
            /\\     /\\
           /üî¥\\   /üî¥\\
          /    \\-/    \\
         /             \\
        /      /\\       \\
        \\     /üî•\\      /
         \\   /    \\    /
          \\_/      \\_/
           | 300/300|
           |________|
        `
    },

    // –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏ –ø—Ä–µ–¥–º–µ—Ç—ã
    items: {
        sword: "‚öîÔ∏è",
        shield: "üõ°Ô∏è",
        potion: "üß™",
        key: "üóùÔ∏è",
        coin: "ü™ô",
        gem: "üíé",
        scroll: "üìú",
        torch: "üî•"
    },

    // –ê–Ω–∏–º–∞—Ü–∏–∏
    animations: {
        swordSwing: ["-", "\\", "|", "/", "-"],
        spellCast: ["*", "**", "***", "****", "***", "**", "*"],
        damage: ["üí•", "‚ö°", "üí¢", "‚ú®"],
        healing: ["‚ù§Ô∏è", "üíö", "üíô", "üíõ"]
    },

    // –ü–æ–ª—É—á–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫—É –¥–ª—è —Å—Ü–µ–Ω—ã
    getScene(sceneName) {
        return this.scenes[sceneName] || this.scenes.castle;
    },

    // –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
    getCharacter(charName) {
        return this.characters[charName] || this.characters.knight;
    },

    // –ê–Ω–∏–º–∞—Ü–∏—è –∞—Ç–∞–∫–∏
    animateAttack(element, callback) {
        const frames = this.animations.swordSwing;
        let i = 0;

        const interval = setInterval(() => {
            if (i >= frames.length) {
                clearInterval(interval);
                if (callback) callback();
                return;
            }

            if (element) {
                element.textContent = frames[i];
            }
            i++;
        }, 100);
    },

    // –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
    createHealthBar(current, max, width = 20) {
        const percent = (current / max) * 100;
        const filled = Math.round((percent / 100) * width);
        const empty = width - filled;

        let bar = "[";
        for (let i = 0; i < filled; i++) bar += "‚ñà";
        for (let i = 0; i < empty; i++) bar += "‚ñë";
        bar += "]";

        return bar;
    },

    // –°–æ–∑–¥–∞—Ç—å —Ä–∞–º–∫—É –¥–ª—è —Ç–µ–∫—Å—Ç–∞
    createBorder(text, style = "single") {
        const lines = text.split('\n');
        const width = Math.max(...lines.map(l => l.length));

        const borders = {
            single: { tl: '‚îå', tr: '‚îê', bl: '‚îî', br: '‚îò', h: '‚îÄ', v: '‚îÇ' },
            double: { tl: '‚ïî', tr: '‚ïó', bl: '‚ïö', br: '‚ïù', h: '‚ïê', v: '‚ïë' },
            round: { tl: '‚ï≠', tr: '‚ïÆ', bl: '‚ï∞', br: '‚ïØ', h: '‚îÄ', v: '‚îÇ' }
        };

        const border = borders[style] || borders.single;
        let result = border.tl + border.h.repeat(width + 2) + border.tr + '\n';

        for (const line of lines) {
            result += border.v + ' ' + line.padEnd(width, ' ') + ' ' + border.v + '\n';
        }

        result += border.bl + border.h.repeat(width + 2) + border.br;
        return result;
    },

    // –≠—Ñ—Ñ–µ–∫—Ç –ø–µ—á–∞—Ç–∞—é—â–µ–≥–æ—Å—è —Ç–µ–∫—Å—Ç–∞ (–¥–ª—è –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã 80-—Ö)
    typewriterEffect(text, element, speed = 30) {
        return new Promise((resolve) => {
            let i = 0;
            element.innerHTML = '';

            const interval = setInterval(() => {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                } else {
                    clearInterval(interval);
                    resolve();
                }
            }, speed);
        });
    },

    // –°–ª—É—á–∞–π–Ω—ã–π VHS —ç—Ñ—Ñ–µ–∫—Ç (–ø–æ–º–µ—Ö–∏)
    vhsGlitch() {
        const glitch = document.createElement('div');
        glitch.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(255, 0, 0, 0.1) 0px,
                rgba(255, 0, 0, 0.1) 1px,
                transparent 1px,
                transparent 3px
            );
            pointer-events: none;
            z-index: 9999;
            animation: glitch 0.1s linear;
        `;

        document.body.appendChild(glitch);

        setTimeout(() => {
            glitch.remove();
        }, 100);
    }
};

window.QuestGraphics = QuestGraphics;